From 151d6cdd539494b47dcd699e6768a50bf0e77fe4 Mon Sep 17 00:00:00 2001
From: scpcom <scpcom@gmx.de>
Date: Thu, 20 Feb 2025 02:33:05 +0100
Subject: [PATCH] vison: kvm_mmf: reduce vi pool size

---
 vision/components/kvm_mmf/src/kvm_mmf.cpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/vision/components/kvm_mmf/src/kvm_mmf.cpp b/vision/components/kvm_mmf/src/kvm_mmf.cpp
index b83cff6..536f9e2 100644
--- a/vision/components/kvm_mmf/src/kvm_mmf.cpp
+++ b/vision/components/kvm_mmf/src/kvm_mmf.cpp
@@ -670,12 +670,12 @@ static CVI_S32 _mmf_sys_init(SIZE_S stSize)
 
 	// vi
 	u32BlkSize = COMMON_GetPicBufferSize(stSize.u32Width, stSize.u32Height, PIXEL_FORMAT_UYVY,
-		DATA_BITWIDTH_12, enCompressMode, DEFAULT_ALIGN);
+		DATA_BITWIDTH_8, enCompressMode, DEFAULT_ALIGN);
 	u32BlkRotSize = COMMON_GetPicBufferSize(stSize.u32Height, stSize.u32Width, PIXEL_FORMAT_UYVY,
-		DATA_BITWIDTH_12, enCompressMode, DEFAULT_ALIGN);
+		DATA_BITWIDTH_8, enCompressMode, DEFAULT_ALIGN);
 	u32BlkSize = MAX(u32BlkSize, u32BlkRotSize);
 	stVbConf.astCommPool[MMF_VB_VI_ID].u32BlkSize	= u32BlkSize;
-	stVbConf.astCommPool[MMF_VB_VI_ID].u32BlkCnt	= 4;
+	stVbConf.astCommPool[MMF_VB_VI_ID].u32BlkCnt	= 3;
 	stVbConf.astCommPool[MMF_VB_VI_ID].enRemapMode	= VB_REMAP_MODE_CACHED;
 	stVbConf.u32MaxPoolCnt = 1;
 
-- 
2.34.1

