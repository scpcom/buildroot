From 338b27338dd252f285c7fd65a73c8daad932713f Mon Sep 17 00:00:00 2001
From: scpcom <scpcom@gmx.de>
Date: Fri, 28 Mar 2025 04:51:39 +0100
Subject: [PATCH 1/4] ffmpeg: set AVCodec to const

---
 components/3rd_party/FFmpeg/maix_ffmpeg.hpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/components/3rd_party/FFmpeg/maix_ffmpeg.hpp b/components/3rd_party/FFmpeg/maix_ffmpeg.hpp
index 5b8fd3f..ab375f7 100644
--- a/components/3rd_party/FFmpeg/maix_ffmpeg.hpp
+++ b/components/3rd_party/FFmpeg/maix_ffmpeg.hpp
@@ -144,7 +144,7 @@ class FFmpegPacker {
     AVStream *_audio_stream = nullptr;
     AVCodecContext *_audio_codec_ctx;
     SwrContext *_audio_swr_ctx;
-    AVCodec *_audio_codec = nullptr;
+    const AVCodec *_audio_codec = nullptr;
     AVFrame *_audio_frame;
     int _audio_sample_rate = 48000;
     int _audio_channels = 1;
@@ -292,7 +292,7 @@ public:
                 goto _free_format_context;
             }
 
-            AVCodec *audio_codec = (AVCodec *)avcodec_find_encoder(AV_CODEC_ID_AAC);
+            const AVCodec *audio_codec = avcodec_find_encoder(AV_CODEC_ID_AAC);
             if (!audio_codec) {
 				printf("Can't find audio encoder\r\n");
                 goto _free_format_context;
-- 
2.34.1

